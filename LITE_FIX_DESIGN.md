# Lite-Fix Command Design Document

**Date**: 2025-11-20
**Version**: 1.0.0
**Status**: Design Proposal
**Related**: PLANNING_GAP_ANALYSIS.md (Scenario #8: ç´§æ€¥ä¿®å¤åœºæ™¯)

---

## è®¾è®¡æ¦‚è¿°

`/workflow:lite-fix` æ˜¯ä¸€ä¸ªè½»é‡çº§çš„bugè¯Šæ–­å’Œä¿®å¤å·¥ä½œæµå‘½ä»¤ï¼Œå¡«è¡¥äº†å½“å‰planningç³»ç»Ÿåœ¨ç´§æ€¥ä¿®å¤åœºæ™¯çš„ç©ºç™½ã€‚è®¾è®¡å‚è€ƒäº† `/workflow:lite-plan` çš„æˆåŠŸæ¨¡å¼ï¼Œé’ˆå¯¹bugä¿®å¤åœºæ™¯è¿›è¡Œä¼˜åŒ–ã€‚

### æ ¸å¿ƒè®¾è®¡ç†å¿µ

1. **å¿«é€Ÿå“åº”** - æ”¯æŒ15åˆ†é’Ÿåˆ°4å°æ—¶çš„ä¿®å¤å‘¨æœŸ
2. **é£é™©æ„ŸçŸ¥** - æ ¹æ®ä¸¥é‡ç¨‹åº¦è°ƒæ•´æµç¨‹å¤æ‚åº¦
3. **æ¸è¿›å¼éªŒè¯** - ä»smoke teståˆ°å…¨é‡æµ‹è¯•çš„çµæ´»ç­–ç•¥
4. **è‡ªåŠ¨åŒ–è·Ÿè¿›** - Hotfixæ¨¡å¼è‡ªåŠ¨ç”Ÿæˆå®Œå–„ä»»åŠ¡

---

## è®¾è®¡å¯¹æ¯”ï¼šlite-fix vs lite-plan

| ç»´åº¦ | lite-plan | lite-fix | è®¾è®¡ç†ç”± |
|------|-----------|----------|----------|
| **ç›®æ ‡åœºæ™¯** | æ–°åŠŸèƒ½å¼€å‘ | Bugä¿®å¤ | ä¸åŒçš„å¼€å‘æ„å›¾ |
| **æ—¶é—´é¢„ç®—** | 1-6å°æ—¶ | 15åˆ†é’Ÿ-4å°æ—¶ | Bugä¿®å¤æ›´ç´§è¿« |
| **æ¢ç´¢é˜¶æ®µ** | å¯é€‰ï¼ˆ`-e` flagï¼‰ | å¿…éœ€ä½†å¯ç®€åŒ– | Bugéœ€è¦è¯Šæ–­ |
| **è¾“å‡ºç±»å‹** | å®ç°è®¡åˆ’ | è¯Šæ–­+ä¿®å¤è®¡åˆ’ | Bugéœ€è¦æ ¹å› åˆ†æ |
| **éªŒè¯ç­–ç•¥** | å®Œæ•´æµ‹è¯•å¥—ä»¶ | åˆ†çº§éªŒè¯ï¼ˆSmoke/Focused/Fullï¼‰ | é£é™©vsé€Ÿåº¦æƒè¡¡ |
| **åˆ†æ”¯ç­–ç•¥** | Featureåˆ†æ”¯ | Feature/Hotfixåˆ†æ”¯ | ç”Ÿäº§ç¯å¢ƒéœ€è¦ç‰¹æ®Šå¤„ç† |
| **è·Ÿè¿›æœºåˆ¶** | æ—  | Hotfixè‡ªåŠ¨ç”Ÿæˆè·Ÿè¿›ä»»åŠ¡ | æŠ€æœ¯å€ºåŠ¡ç®¡ç† |

---

## ä¸‰ç§ä¸¥é‡åº¦æ¨¡å¼è®¾è®¡

### Mode 1: Regular (é»˜è®¤)

**é€‚ç”¨åœºæ™¯**ï¼š
- éé˜»å¡æ€§bug
- å½±å“<20%ç”¨æˆ·
- æœ‰å……è¶³æ—¶é—´ï¼ˆ2-4å°æ—¶ï¼‰

**æµç¨‹ç‰¹ç‚¹**ï¼š
```
å®Œæ•´è¯Šæ–­ â†’ å¤šç­–ç•¥è¯„ä¼° â†’ å…¨é‡æµ‹è¯• â†’ æ ‡å‡†åˆ†æ”¯
```

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š
```bash
/workflow:lite-fix "ç”¨æˆ·å¤´åƒä¸Šä¼ å¤±è´¥ï¼Œè¿”å›413é”™è¯¯"
```

### Mode 2: Critical (`--critical`)

**é€‚ç”¨åœºæ™¯**ï¼š
- å½±å“æ ¸å¿ƒåŠŸèƒ½
- å½±å“20-50%ç”¨æˆ·
- éœ€è¦1å°æ—¶å†…ä¿®å¤

**æµç¨‹ç®€åŒ–**ï¼š
```
èšç„¦è¯Šæ–­ â†’ å•ä¸€æœ€ä½³ç­–ç•¥ â†’ å…³é”®åœºæ™¯æµ‹è¯• â†’ å¿«é€Ÿåˆ†æ”¯
```

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š
```bash
/workflow:lite-fix --critical "è´­ç‰©è½¦ç»“ç®—æ—¶éšæœºä¸¢å¤±å•†å“"
```

### Mode 3: Hotfix (`--hotfix`)

**é€‚ç”¨åœºæ™¯**ï¼š
- ç”Ÿäº§å®Œå…¨æ•…éšœ
- å½±å“100%ç”¨æˆ·æˆ–ä¸šåŠ¡ä¸­æ–­
- éœ€è¦15-30åˆ†é’Ÿä¿®å¤

**æµç¨‹æœ€ç®€**ï¼š
```
æœ€å°è¯Šæ–­ â†’ å¤–ç§‘æ‰‹æœ¯å¼ä¿®å¤ â†’ Smokeæµ‹è¯• â†’ Hotfixåˆ†æ”¯ â†’ è‡ªåŠ¨è·Ÿè¿›ä»»åŠ¡
```

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š
```bash
/workflow:lite-fix --hotfix --incident INC-2024-1015 "æ”¯ä»˜ç½‘å…³5xxé”™è¯¯"
```

---

## å…­é˜¶æ®µæ‰§è¡Œæµç¨‹è®¾è®¡

### Phase 1: Diagnosis & Root Cause (è¯Šæ–­)

**è®¾è®¡äº®ç‚¹**ï¼š
- **æ™ºèƒ½æœç´¢ç­–ç•¥**ï¼šRegularä½¿ç”¨cli-explore-agentï¼ŒCriticalä½¿ç”¨ç›´æ¥æœç´¢ï¼ŒHotfixä½¿ç”¨å·²çŸ¥ä¿¡æ¯
- **ç»“æ„åŒ–è¾“å‡º**ï¼šroot_causeå¯¹è±¡åŒ…å«fileã€line_rangeã€issueã€introduced_by
- **å¯å¤ç°æ€§éªŒè¯**ï¼šè¾“å‡ºreproduction_stepsä¾›éªŒè¯

**æŠ€æœ¯å®ç°**ï¼š
```javascript
if (mode === "regular") {
  // ä½¿ç”¨cli-explore-agentæ·±åº¦æ¢ç´¢
  Task(subagent_type="cli-explore-agent", ...)
} else if (mode === "critical") {
  // ç›´æ¥ä½¿ç”¨grep + git blame
  Bash("grep -r '${error}' src/ | head -10")
} else {
  // å‡è®¾å·²çŸ¥é—®é¢˜ï¼Œè·³è¿‡æ¢ç´¢
  Read(suspected_file)
}
```

### Phase 2: Impact Assessment (å½±å“è¯„ä¼°)

**è®¾è®¡äº®ç‚¹**ï¼š
- **é‡åŒ–é£é™©è¯„åˆ†**ï¼š`risk_score = user_impactÃ—0.4 + system_riskÃ—0.3 + business_impactÃ—0.3`
- **è‡ªåŠ¨ä¸¥é‡åº¦å»ºè®®**ï¼šæ ¹æ®è¯„åˆ†å»ºè®®ä½¿ç”¨`--critical`æˆ–`--hotfix`
- **ä¸šåŠ¡å½±å“åˆ†æ**ï¼šåŒ…æ‹¬revenueã€reputationã€SLA breach

**è¾“å‡ºç¤ºä¾‹**ï¼š
```markdown
## Impact Assessment
**Risk Level**: HIGH (7.1/10)
**Affected Users**: ~5000 (100%)
**Business Impact**: Revenue (Medium), Reputation (High), SLA Breached
**Recommended Severity**: --critical flag suggested
```

### Phase 3: Fix Planning (ä¿®å¤è§„åˆ’)

**è®¾è®¡äº®ç‚¹**ï¼š
- **å¤šç­–ç•¥ç”Ÿæˆ**ï¼ˆRegularï¼‰ï¼šimmediate_patch vs comprehensive_refactor
- **å•ä¸€æœ€ä½³ç­–ç•¥**ï¼ˆCritical/Hotfixï¼‰ï¼šsurgical_fix
- **å¤æ‚åº¦è‡ªé€‚åº”**ï¼šä½å¤æ‚åº¦ç”¨Claudeç›´æ¥è§„åˆ’ï¼Œä¸­ç­‰å¤æ‚åº¦ç”¨cli-lite-planning-agent

**å‡çº§è·¯å¾„**ï¼š
```javascript
if (complexity > threshold) {
  suggest("/workflow:plan --mode bugfix")
}
```

### Phase 4: Verification Strategy (éªŒè¯ç­–ç•¥)

**ä¸‰çº§éªŒè¯è®¾è®¡**ï¼š

| Level | Test Scope | Duration | Pass Criteria |
|-------|------------|----------|---------------|
| Smoke | æ ¸å¿ƒè·¯å¾„ | 2-5åˆ†é’Ÿ | æ— æ ¸å¿ƒåŠŸèƒ½å›å½’ |
| Focused | å—å½±å“æ¨¡å— | 5-10åˆ†é’Ÿ | å…³é”®åœºæ™¯é€šè¿‡ |
| Comprehensive | å®Œæ•´å¥—ä»¶ | 10-20åˆ†é’Ÿ | å…¨éƒ¨æµ‹è¯•é€šè¿‡ |

**åˆ†æ”¯ç­–ç•¥å·®å¼‚**ï¼š
```javascript
if (mode === "hotfix") {
  branch = {
    type: "hotfix_branch",
    base: "production_tag_v2.3.1",  // âš ï¸ ä»ç”Ÿäº§tagåˆ›å»º
    merge_target: ["main", "production"]  // åŒå‘åˆå¹¶
  }
}
```

### Phase 5: User Confirmation (ç”¨æˆ·ç¡®è®¤)

**å¤šç»´åº¦ç¡®è®¤è®¾è®¡**ï¼š

**Regular**: 4ç»´åº¦
1. Fix strategy (Proceed/Modify/Escalate)
2. Execution method (Agent/CLI/Manual)
3. Verification level (Full/Focused/Smoke)
4. Code review (Gemini/Skip)

**Critical**: 3ç»´åº¦ï¼ˆè·³è¿‡code reviewï¼‰

**Hotfix**: 2ç»´åº¦ï¼ˆæœ€å°ç¡®è®¤ï¼‰
1. Deploy confirmation (Deploy/Stage First/Abort)
2. Post-deployment monitoring (Real-time/Passive)

### Phase 6: Execution & Follow-up (æ‰§è¡Œå’Œè·Ÿè¿›)

**è®¾è®¡äº®ç‚¹**ï¼š
- **ç»Ÿä¸€æ‰§è¡Œæ¥å£**ï¼šé€šè¿‡`/workflow:lite-execute --in-memory --mode bugfix`æ‰§è¡Œ
- **è‡ªåŠ¨è·Ÿè¿›ä»»åŠ¡**ï¼ˆHotfixä¸“å±ï¼‰ï¼š
  ```json
  [
    {"id": "FOLLOWUP-comprehensive", "title": "å®Œå–„ä¿®å¤", "due": "3å¤©"},
    {"id": "FOLLOWUP-postmortem", "title": "äº‹ååˆ†æ", "due": "1å‘¨"}
  ]
  ```
- **å®æ—¶ç›‘æ§**ï¼ˆå¯é€‰ï¼‰ï¼š15åˆ†é’Ÿç›‘æ§çª—å£ï¼Œè‡ªåŠ¨å›æ»šè§¦å‘å™¨

---

## ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ

### 1. å‘½ä»¤é›†æˆè·¯å¾„

```mermaid
graph TD
    A[Bugå‘ç°] --> B{ä¸¥é‡ç¨‹åº¦?}
    B -->|ä¸ç¡®å®š| C[/cli:mode:bug-diagnosis]
    C --> D[/workflow:lite-fix]

    B -->|ä¸€èˆ¬| E[/workflow:lite-fix]
    B -->|ç´§æ€¥| F[/workflow:lite-fix --critical]
    B -->|ç”Ÿäº§æ•…éšœ| G[/workflow:lite-fix --hotfix]

    E --> H{å¤æ‚åº¦?}
    F --> H
    G --> I[lite-execute]

    H -->|ç®€å•| I
    H -->|å¤æ‚| J[å»ºè®®å‡çº§åˆ° /workflow:plan]

    I --> K[ä¿®å¤å®Œæˆ]
    K --> L[/workflow:review --type quality]
```

### 2. æ•°æ®æµè®¾è®¡

**è¾“å…¥**ï¼š
```javascript
{
  bug_description: string,
  severity_flags: "--critical" | "--hotfix" | null,
  incident_id: string | null
}
```

**å†…éƒ¨æ•°æ®ç»“æ„**ï¼š
- `diagnosisContext`: æ ¹å› åˆ†æç»“æœ
- `impactContext`: å½±å“è¯„ä¼°ç»“æœ
- `fixPlan`: ä¿®å¤è®¡åˆ’å¯¹è±¡
- `executionContext`: ä¼ é€’ç»™lite-executeçš„ä¸Šä¸‹æ–‡

**è¾“å‡º**ï¼š
```javascript
{
  // In-memory (ä¼ é€’ç»™lite-execute)
  executionContext: {...},

  // Optional: Persistent JSON
  `.workflow/lite-fixes/BUGFIX-${timestamp}.json`,

  // Hotfixä¸“å±ï¼šFollow-up tasks
  `.workflow/lite-fixes/BUGFIX-${timestamp}-followup.json`
}
```

### 3. ä¸lite-executeé…åˆ

**lite-fixèŒè´£**ï¼š
- âœ… è¯Šæ–­å’Œè§„åˆ’
- âœ… å½±å“è¯„ä¼°
- âœ… ç­–ç•¥é€‰æ‹©
- âœ… ç”¨æˆ·ç¡®è®¤

**lite-executeèŒè´£**ï¼š
- âœ… ä»£ç å®ç°
- âœ… æµ‹è¯•æ‰§è¡Œ
- âœ… åˆ†æ”¯æ“ä½œ
- âœ… éƒ¨ç½²ç›‘æ§

**äº¤æ¥æœºåˆ¶**ï¼š
```javascript
// lite-fixå‡†å¤‡executionContext
executionContext = {
  mode: "bugfix",
  severity: "hotfix",
  planObject: {...},
  diagnosisContext: {...},
  verificationStrategy: {...},
  branchStrategy: {...}
}

// è°ƒç”¨lite-execute
SlashCommand("/workflow:lite-execute --in-memory --mode bugfix")
```

---

## æ¶æ„æ‰©å±•ç‚¹

### 1. Enhanced Task JSON Schemaæ‰©å±•

**æ–°å¢scenarioç±»å‹**ï¼š
```json
{
  "scenario_type": "bugfix",
  "scenario_config": {
    "severity": "regular|critical|hotfix",
    "root_cause": {
      "file": "...",
      "line_range": "...",
      "issue": "..."
    },
    "impact_assessment": {
      "risk_score": 7.1,
      "affected_users_count": 5000
    }
  }
}
```

### 2. workflow-session.jsonæ‰©å±•ï¼ˆå¦‚æœä½¿ç”¨sessionæ¨¡å¼ï¼‰

```json
{
  "session_id": "WFS-bugfix-payment",
  "type": "bugfix",
  "severity": "critical",
  "incident_id": "INC-2024-1015",
  "bugfixes": [
    {
      "id": "BUGFIX-001",
      "status": "completed",
      "follow_up_tasks": ["FOLLOWUP-001", "FOLLOWUP-002"]
    }
  ]
}
```

### 3. è¯Šæ–­ç¼“å­˜æœºåˆ¶ï¼ˆé«˜çº§ç‰¹æ€§ï¼‰

**è®¾è®¡ç›®çš„**ï¼šåŠ é€Ÿç›¸ä¼¼bugçš„è¯Šæ–­

```javascript
cache_key = hash(bug_keywords + recent_changes_hash)
cache_path = `.workflow/lite-fixes/diagnosis-cache/${cache_key}.json`

if (cache_exists && cache_age < 1_week) {
  diagnosis = load_from_cache()
  console.log("Using cached diagnosis (similar issue found)")
}
```

---

## è´¨é‡ä¿è¯æœºåˆ¶

### 1. è´¨é‡é—¨ç¦

**æ‰§è¡Œå‰æ£€æŸ¥**ï¼š
- [ ] æ ¹å› è¯†åˆ«ç½®ä¿¡åº¦>80%
- [ ] å½±å“èŒƒå›´æ˜ç¡®å®šä¹‰
- [ ] ä¿®å¤ç­–ç•¥å·²å®¡æŸ¥æ‰¹å‡†
- [ ] éªŒè¯è®¡åˆ’ä¸é£é™©åŒ¹é…
- [ ] åˆ†æ”¯ç­–ç•¥ç¬¦åˆä¸¥é‡åº¦

**Hotfixä¸“å±é—¨ç¦**ï¼š
- [ ] äº‹æ•…å·¥å•å·²åˆ›å»ºå¹¶å…³è”
- [ ] äº‹æ•…æŒ‡æŒ¥å®˜æ‰¹å‡†
- [ ] å›æ»šè®¡åˆ’å·²æ–‡æ¡£åŒ–
- [ ] è·Ÿè¿›ä»»åŠ¡å·²ç”Ÿæˆ
- [ ] éƒ¨ç½²åç›‘æ§å·²é…ç½®

### 2. é”™è¯¯å¤„ç†ç­–ç•¥

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| æ ¹å› æœªæ‰¾åˆ° | æœç´¢èŒƒå›´ä¸è¶³ | æ‰©å¤§æœç´¢æˆ–å‡çº§åˆ°/workflow:plan |
| å¤ç°å¤±è´¥ | è¿‡æœŸbugæˆ–ç¯å¢ƒé—®é¢˜ | éªŒè¯ç¯å¢ƒï¼Œè¯·æ±‚æ›´æ–°å¤ç°æ­¥éª¤ |
| å¤šä¸ªæ½œåœ¨åŸå›  | å¤æ‚äº¤äº’ | ä½¿ç”¨/cli:discuss-planå¤šæ¨¡å‹åˆ†æ |
| ä¿®å¤è¿‡äºå¤æ‚ | éœ€è¦é‡æ„ | å»ºè®®/workflow:plan --mode refactor |
| HotfixéªŒè¯å¤±è´¥ | Smokeæµ‹è¯•ä¸è¶³ | æ·»åŠ å…³é”®æµ‹è¯•æˆ–é™çº§åˆ°criticalæ¨¡å¼ |

---

## å®ç°ä¼˜å…ˆçº§å’Œè·¯çº¿å›¾

### Phase 1: æ ¸å¿ƒåŠŸèƒ½å®ç°ï¼ˆSprint 1ï¼‰

**å¿…éœ€åŠŸèƒ½**ï¼š
- [x] å‘½ä»¤æ–‡æ¡£å®Œæˆï¼ˆæœ¬æ–‡æ¡£ï¼‰
- [ ] å…­é˜¶æ®µæµç¨‹å®ç°
- [ ] ä¸‰ç§ä¸¥é‡åº¦æ¨¡å¼æ”¯æŒ
- [ ] åŸºç¡€è¯Šæ–­é€»è¾‘
- [ ] ä¸lite-executeé›†æˆ

**é¢„è®¡å·¥ä½œé‡**ï¼š5-8å¤©

### Phase 2: é«˜çº§ç‰¹æ€§ï¼ˆSprint 2ï¼‰

**å¢å¼ºåŠŸèƒ½**ï¼š
- [ ] è¯Šæ–­ç¼“å­˜æœºåˆ¶
- [ ] è‡ªåŠ¨ä¸¥é‡åº¦æ£€æµ‹
- [ ] Hotfixåˆ†æ”¯ç®¡ç†
- [ ] å®æ—¶ç›‘æ§é›†æˆ
- [ ] è·Ÿè¿›ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ

**é¢„è®¡å·¥ä½œé‡**ï¼š3-5å¤©

### Phase 3: ä¼˜åŒ–å’Œå®Œå–„ï¼ˆSprint 3ï¼‰

**ä¼˜åŒ–é¡¹**ï¼š
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆè¯Šæ–­é€Ÿåº¦ï¼‰
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] æ–‡æ¡£å’Œç¤ºä¾‹è¡¥å……
- [ ] ç”¨æˆ·åé¦ˆè¿­ä»£

**é¢„è®¡å·¥ä½œé‡**ï¼š2-3å¤©

---

## æˆåŠŸåº¦é‡æŒ‡æ ‡

### 1. ä½¿ç”¨æŒ‡æ ‡

- **é‡‡ç”¨ç‡**ï¼šlite-fixä½¿ç”¨æ¬¡æ•° / æ€»bugä¿®å¤æ¬¡æ•°
- **ç›®æ ‡**ï¼š>60%çš„å¸¸è§„bugä½¿ç”¨lite-fix

### 2. æ•ˆç‡æŒ‡æ ‡

- **Regularæ¨¡å¼**ï¼šå¹³å‡ä¿®å¤æ—¶é—´<3å°æ—¶ï¼ˆvs æ‰‹åŠ¨4-6å°æ—¶ï¼‰
- **Criticalæ¨¡å¼**ï¼šå¹³å‡ä¿®å¤æ—¶é—´<1å°æ—¶ï¼ˆvs æ‰‹åŠ¨2-3å°æ—¶ï¼‰
- **Hotfixæ¨¡å¼**ï¼šå¹³å‡ä¿®å¤æ—¶é—´<30åˆ†é’Ÿï¼ˆvs æ‰‹åŠ¨1-2å°æ—¶ï¼‰

### 3. è´¨é‡æŒ‡æ ‡

- **è¯Šæ–­å‡†ç¡®ç‡**ï¼šæ ¹å› è¯†åˆ«å‡†ç¡®ç‡>85%
- **ä¿®å¤æˆåŠŸç‡**ï¼šé¦–æ¬¡ä¿®å¤æˆåŠŸç‡>90%
- **å›å½’ç‡**ï¼šå¼•å…¥æ–°bugçš„æ¯”ä¾‹<5%

### 4. è·Ÿè¿›å®Œæˆç‡ï¼ˆHotfixï¼‰

- **è·Ÿè¿›ä»»åŠ¡å®Œæˆç‡**ï¼š>80%çš„è·Ÿè¿›ä»»åŠ¡åœ¨deadlineå‰å®Œæˆ
- **æŠ€æœ¯å€ºåŠ¡å¿è¿˜**ï¼šHotfixçš„å®Œå–„ä¿®å¤åœ¨3å¤©å†…å®Œæˆç‡>70%

---

## é£é™©å’Œç¼“è§£æªæ–½

### é£é™©1: Hotfixè¯¯ç”¨å¯¼è‡´ç”Ÿäº§é—®é¢˜

**ç¼“è§£æªæ–½**ï¼š
1. ä¸¥æ ¼çš„è´¨é‡é—¨ç¦ï¼ˆéœ€è¦äº‹æ•…æŒ‡æŒ¥å®˜æ‰¹å‡†ï¼‰
2. å¼ºåˆ¶å›æ»šè®¡åˆ’æ–‡æ¡£åŒ–
3. å®æ—¶ç›‘æ§è‡ªåŠ¨å›æ»šè§¦å‘å™¨
4. å¼ºåˆ¶ç”Ÿæˆè·Ÿè¿›ä»»åŠ¡

### é£é™©2: è¯Šæ–­å‡†ç¡®ç‡ä¸è¶³

**ç¼“è§£æªæ–½**ï¼š
1. è¯Šæ–­ç½®ä¿¡åº¦è¯„åˆ†ï¼ˆ<80%å»ºè®®å‡çº§åˆ°/workflow:planï¼‰
2. æä¾›å¤šå‡è®¾è¯Šæ–­ï¼ˆå½“ä¸ç¡®å®šæ—¶ï¼‰
3. é›†æˆ/cli:discuss-planç”¨äºå¤æ‚case

### é£é™©3: ç”¨æˆ·è·³è¿‡å¿…è¦éªŒè¯

**ç¼“è§£æªæ–½**ï¼š
1. æ ¹æ®ä¸¥é‡åº¦å¼ºåˆ¶æœ€ä½éªŒè¯çº§åˆ«
2. æ˜¾ç¤ºé£é™©è­¦å‘Šï¼ˆè·³è¿‡æµ‹è¯•çš„åæœï¼‰
3. Hotfixæ¨¡å¼ç¦æ­¢è·³è¿‡smokeæµ‹è¯•

---

## ä¸PLANNING_GAP_ANALYSISçš„å¯¹åº”å…³ç³»

æœ¬è®¾è®¡æ˜¯å¯¹ `PLANNING_GAP_ANALYSIS.md` ä¸­ **åœºæ™¯8: ç´§æ€¥ä¿®å¤åœºæ™¯** çš„å®Œæ•´å®ç°æ–¹æ¡ˆã€‚

**Gapè¦†ç›–æƒ…å†µ**ï¼š

| Gapé¡¹ | è¦†ç›–ç¨‹åº¦ | å®ç°æ–¹å¼ |
|-------|---------|---------|
| æµç¨‹ç®€åŒ– | âœ… 100% | ä¸‰ç§ä¸¥é‡åº¦æ¨¡å¼ |
| å¿«é€ŸéªŒè¯ | âœ… 100% | åˆ†çº§éªŒè¯ç­–ç•¥ |
| Hotfixåˆ†æ”¯ç®¡ç† | âœ… 100% | branchStrategyé…ç½® |
| äº‹åè¡¥å……å®Œæ•´ä¿®å¤ | âœ… 100% | è‡ªåŠ¨è·Ÿè¿›ä»»åŠ¡ç”Ÿæˆ |

**é¢å¤–å¢å¼º**ï¼š
- âœ… è¯Šæ–­ç¼“å­˜æœºåˆ¶ï¼ˆæœªåœ¨åŸgapä¸­æåŠï¼‰
- âœ… å®æ—¶ç›‘æ§é›†æˆï¼ˆè¶…å‡ºåŸéœ€æ±‚ï¼‰
- âœ… è‡ªåŠ¨ä¸¥é‡åº¦å»ºè®®ï¼ˆæ™ºèƒ½åŒ–å¢å¼ºï¼‰

---

## è®¾è®¡å†³ç­–è®°å½•

### ADR-001: ä¸ºä»€ä¹ˆä¸å¤ç”¨/workflow:plan?

**å†³ç­–**ï¼šåˆ›å»ºç‹¬ç«‹çš„lite-fixå‘½ä»¤

**ç†ç”±**ï¼š
1. Bugä¿®å¤çš„æ ¸å¿ƒæ˜¯"è¯Šæ–­"ï¼Œè€Œplançš„æ ¸å¿ƒæ˜¯"è®¾è®¡"
2. Bugä¿®å¤éœ€è¦é£é™©åˆ†çº§ï¼ˆRegular/Critical/Hotfixï¼‰ï¼Œplanä¸éœ€è¦
3. Bugä¿®å¤éœ€è¦Hotfixåˆ†æ”¯ç®¡ç†ï¼Œplanä½¿ç”¨æ ‡å‡†featureåˆ†æ”¯
4. Bugä¿®å¤éœ€è¦è·Ÿè¿›ä»»åŠ¡æœºåˆ¶ï¼Œplanå‡è®¾ä¸€æ¬¡æ€§å®Œæˆ

**æ›¿ä»£æ–¹æ¡ˆè¢«æ‹’ç»**ï¼š`/workflow:plan --mode bugfix`
- é—®é¢˜ï¼šplanæµç¨‹å¤ªé‡ï¼Œä¸é€‚åˆ15åˆ†é’Ÿhotfixåœºæ™¯

### ADR-002: ä¸ºä»€ä¹ˆåˆ†ä¸‰ç§ä¸¥é‡åº¦è€Œä¸æ˜¯è¿ç»­è¯„åˆ†?

**å†³ç­–**ï¼šä½¿ç”¨ç¦»æ•£çš„Regular/Critical/Hotfixæ¨¡å¼

**ç†ç”±**ï¼š
1. æ¸…æ™°çš„å†³ç­–ç‚¹ï¼ˆç”¨æˆ·å®¹æ˜“é€‰æ‹©ï¼‰
2. æ¯ä¸ªæ¨¡å¼æœ‰æ˜ç¡®çš„æµç¨‹å·®å¼‚
3. é¿å…"è¯„åˆ†8.5åº”è¯¥ç”¨ä»€ä¹ˆæµç¨‹"çš„æ¨¡ç³Šæ€§

**æ›¿ä»£æ–¹æ¡ˆè¢«æ‹’ç»**ï¼š0-10è¿ç»­è¯„åˆ†è‡ªåŠ¨é€‰æ‹©æµç¨‹
- é—®é¢˜ï¼šè¯„åˆ†è¾¹ç•Œæ¨¡ç³Šï¼Œç”¨æˆ·éš¾ä»¥ç†è§£ä¸ºä»€ä¹ˆæŸä¸ªåˆ†æ•°ç”¨æŸä¸ªæµç¨‹

### ADR-003: ä¸ºä»€ä¹ˆè¯Šæ–­æ˜¯å¿…éœ€è€Œéå¯é€‰?

**å†³ç­–**ï¼šPhase 1è¯Šæ–­åœ¨æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½æ˜¯å¿…éœ€çš„ï¼ˆä½†å¤æ‚åº¦å¯è°ƒæ•´ï¼‰

**ç†ç”±**ï¼š
1. å³ä½¿æ˜¯å·²çŸ¥bugï¼Œä¹Ÿéœ€è¦éªŒè¯å¤ç°è·¯å¾„
2. è¯Šæ–­è¾“å‡ºå¯¹åç»­ä¿®å¤è´¨é‡è‡³å…³é‡è¦
3. è·³è¿‡è¯Šæ–­å®¹æ˜“å¯¼è‡´ä¿®é”™é—®é¢˜ï¼ˆä¿®äº†Aå´æ²¡ä¿®Bï¼‰

**æ›¿ä»£æ–¹æ¡ˆè¢«æ‹’ç»**ï¼šHotfixæ¨¡å¼å®Œå…¨è·³è¿‡è¯Šæ–­
- é—®é¢˜ï¼šå¢åŠ è¯¯ä¿®é£é™©ï¼Œäº‹åéš¾ä»¥ç”Ÿæˆpostmortem

---

## æ€»ç»“

`/workflow:lite-fix` æ˜¯å¯¹å½“å‰planningç³»ç»Ÿçš„é‡è¦è¡¥å……ï¼Œä¸“æ³¨äºbugä¿®å¤è¿™ä¸€ç‰¹å®šåœºæ™¯ã€‚è®¾è®¡å……åˆ†å€Ÿé‰´äº†lite-plançš„æˆåŠŸç»éªŒï¼ŒåŒæ—¶é’ˆå¯¹bugä¿®å¤çš„ç‰¹æ®Šéœ€æ±‚è¿›è¡Œäº†ä¼˜åŒ–ï¼š

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
1. âš¡ **å¿«é€Ÿå“åº”**ï¼š15åˆ†é’Ÿåˆ°4å°æ—¶çš„ä¿®å¤å‘¨æœŸ
2. ğŸ¯ **é£é™©æ„ŸçŸ¥**ï¼šä¸‰ç§ä¸¥é‡åº¦æ¨¡å¼é€‚é…ä¸åŒç´§æ€¥ç¨‹åº¦
3. ğŸ” **æ™ºèƒ½è¯Šæ–­**ï¼šç»“æ„åŒ–æ ¹å› åˆ†æ
4. ğŸ›¡ï¸ **è´¨é‡ä¿è¯**ï¼šåˆ†çº§éªŒè¯+å¼ºåˆ¶é—¨ç¦
5. ğŸ“‹ **æŠ€æœ¯å€ºåŠ¡ç®¡ç†**ï¼šHotfixè‡ªåŠ¨ç”Ÿæˆå®Œå–„ä»»åŠ¡

**ä¸ç°æœ‰ç³»ç»ŸååŒ**ï¼š
- ä¸ `/workflow:lite-plan` å½¢æˆ"ä¿®å¤-å¼€å‘"åŒå­å‘½ä»¤
- å¤ç”¨ `/workflow:lite-execute` æ‰§è¡Œå±‚
- é›†æˆ `/cli:mode:bug-diagnosis` è¯Šæ–­èƒ½åŠ›
- æ”¯æŒå‡çº§åˆ° `/workflow:plan` å¤„ç†å¤æ‚åœºæ™¯

**é¢„æœŸå½±å“**ï¼š
- å‡å°‘bugä¿®å¤æ—¶é—´50-70%
- æå‡è¯Šæ–­å‡†ç¡®ç‡åˆ°85%+
- å‡å°‘ç”Ÿäº§hotfixé£é™©
- ç³»ç»ŸåŒ–ç®¡ç†æŠ€æœ¯å€ºåŠ¡

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**ä½œè€…**: Claude (Sonnet 4.5)
**å®¡é˜…çŠ¶æ€**: å¾…å®¡é˜…
**å®ç°çŠ¶æ€**: è®¾è®¡é˜¶æ®µï¼ˆå¾…å¼€å‘ï¼‰
