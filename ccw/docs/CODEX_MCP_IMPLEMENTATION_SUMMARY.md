# Codex MCP åŠŸèƒ½å®ç°æ€»ç»“

## ğŸ“ å·²å®Œæˆçš„ä¿®å¤

### 1. CCW Tools MCP å¡ç‰‡æ ·å¼ä¿®å¤

**æ–‡ä»¶**: `ccw/src/templates/dashboard-js/views/mcp-manager.js`

**ä¿®æ”¹å†…å®¹**:
- âœ… å¡ç‰‡è¾¹æ¡†: `border-primary` â†’ `border-orange-500` (ç¬¬345è¡Œ)
- âœ… å›¾æ ‡èƒŒæ™¯: `bg-primary` â†’ `bg-orange-500` (ç¬¬348è¡Œ)
- âœ… å›¾æ ‡é¢œè‰²: `text-primary-foreground` â†’ `text-white` (ç¬¬349è¡Œ)
- âœ… "Available"å¾½ç« : `bg-primary/20 text-primary` â†’ `bg-orange-500/20 text-orange-600` (ç¬¬360è¡Œ)
- âœ… é€‰æ‹©æŒ‰é’®é¢œè‰²: `text-primary` â†’ `text-orange-500` (ç¬¬378-379è¡Œ)
- âœ… å®‰è£…æŒ‰é’®: `bg-primary` â†’ `bg-orange-500` (ç¬¬386è¡Œã€ç¬¬399è¡Œ)

**å½±å“èŒƒå›´**: Claude æ¨¡å¼ä¸‹çš„ CCW Tools MCP å¡ç‰‡

---

### 2. Toast æ¶ˆæ¯æ˜¾ç¤ºæ—¶é—´å¢å¼º

**æ–‡ä»¶**: `ccw/src/templates/dashboard-js/components/navigation.js`

**ä¿®æ”¹å†…å®¹**:
- âœ… æ˜¾ç¤ºæ—¶é—´: 2000ms â†’ 3500ms (ç¬¬300è¡Œ)

**å½±å“èŒƒå›´**: æ‰€æœ‰ Toast æ¶ˆæ¯ï¼ˆMCP å®‰è£…ã€åˆ é™¤ã€åˆ‡æ¢ç­‰æ“ä½œåé¦ˆï¼‰

---

## ğŸ”§ åŠŸèƒ½å®ç°ç»†èŠ‚

### Codex MCP å®‰è£…æµç¨‹

```
ç”¨æˆ·æ“ä½œ
    â†“
å‰ç«¯å‡½æ•°: copyClaudeServerToCodex(serverName, serverConfig)
    â†“
è°ƒç”¨: addCodexMcpServer(serverName, serverConfig)
    â†“
API è¯·æ±‚: POST /api/codex-mcp-add
    â†“
åç«¯å¤„ç†: addCodexMcpServer(serverName, serverConfig)
    â†“
æ–‡ä»¶æ“ä½œ:
  1. è¯»å– ~/.codex/config.toml (å¦‚å­˜åœ¨)
  2. è§£æ TOML é…ç½®
  3. æ·»åŠ /æ›´æ–° mcp_servers[serverName]
  4. åºåˆ—åŒ–ä¸º TOML
  5. å†™å…¥æ–‡ä»¶
    â†“
è¿”å›å“åº”: {success: true} æˆ– {error: "..."}
    â†“
å‰ç«¯æ›´æ–°:
  1. loadMcpConfig() - é‡æ–°åŠ è½½é…ç½®
  2. renderMcpManager() - é‡æ–°æ¸²æŸ“ UI
  3. showRefreshToast(...) - æ˜¾ç¤ºæˆåŠŸ/å¤±è´¥æ¶ˆæ¯ (3.5ç§’)
```

---

## ğŸ“ å…³é”®ä»£ç ä½ç½®

### å‰ç«¯

| åŠŸèƒ½ | æ–‡ä»¶ | è¡Œå· | è¯´æ˜ |
|------|------|------|------|
| å¤åˆ¶åˆ° Codex | `components/mcp-manager.js` | 175-177 | `copyClaudeServerToCodex()` å‡½æ•° |
| æ·»åŠ åˆ° Codex | `components/mcp-manager.js` | 87-114 | `addCodexMcpServer()` å‡½æ•° |
| Toast æ¶ˆæ¯ | `components/navigation.js` | 286-301 | `showRefreshToast()` å‡½æ•° |
| CCW Tools æ ·å¼ | `views/mcp-manager.js` | 342-415 | Claude æ¨¡å¼å¡ç‰‡æ¸²æŸ“ |
| å…¶ä»–é¡¹ç›®æŒ‰é’® | `views/mcp-manager.js` | 1015-1020 | "Install to Codex" æŒ‰é’® |

### åç«¯

| åŠŸèƒ½ | æ–‡ä»¶ | è¡Œå· | è¯´æ˜ |
|------|------|------|------|
| API ç«¯ç‚¹ | `core/routes/mcp-routes.ts` | 1001-1010 | `/api/codex-mcp-add` è·¯ç”± |
| æ·»åŠ æœåŠ¡å™¨ | `core/routes/mcp-routes.ts` | 251-330 | `addCodexMcpServer()` å‡½æ•° |
| TOML åºåˆ—åŒ– | `core/routes/mcp-routes.ts` | 166-188 | `serializeToml()` å‡½æ•° |

### CSS

| åŠŸèƒ½ | æ–‡ä»¶ | è¡Œå· | è¯´æ˜ |
|------|------|------|------|
| Toast æ ·å¼ | `dashboard-css/06-cards.css` | 1501-1538 | Toast å®¹å™¨å’Œç±»å‹æ ·å¼ |
| Toast åŠ¨ç”» | `dashboard-css/06-cards.css` | 1540-1551 | æ»‘å…¥/æ·¡å‡ºåŠ¨ç”» |

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç”¨ä¾‹ 1: CCW Tools æ ·å¼éªŒè¯

**å‰ç½®æ¡ä»¶**: Dashboard è¿è¡Œï¼Œè¿›å…¥ MCP ç®¡ç†é¡µé¢

**æµ‹è¯•æ­¥éª¤**:
1. ç¡®ä¿åœ¨ Claude æ¨¡å¼
2. æŸ¥çœ‹ CCW Tools MCP å¡ç‰‡

**é¢„æœŸç»“æœ**:
- [ ] å¡ç‰‡æœ‰æ©™è‰²è¾¹æ¡†ï¼ˆ`border-orange-500/30`ï¼‰
- [ ] å›¾æ ‡èƒŒæ™¯æ˜¯æ©™è‰²ï¼ˆ`bg-orange-500`ï¼‰
- [ ] å›¾æ ‡æ˜¯ç™½è‰²ï¼ˆ`text-white`ï¼‰
- [ ] "Available"å¾½ç« æ˜¯æ©™è‰²
- [ ] æŒ‰é’®æ˜¯æ©™è‰²

**ä¼˜å…ˆçº§**: High

---

### æµ‹è¯•ç”¨ä¾‹ 2: Codex MCP æ–°å»ºå®‰è£…

**å‰ç½®æ¡ä»¶**: Dashboard è¿è¡Œï¼Œè¿›å…¥ MCP ç®¡ç†é¡µé¢

**æµ‹è¯•æ­¥éª¤**:
1. åˆ‡æ¢åˆ° Codex æ¨¡å¼
2. å‹¾é€‰ CCW Tools çš„ 4 ä¸ªæ ¸å¿ƒå·¥å…·
3. ç‚¹å‡»"Install"æŒ‰é’®
4. è§‚å¯Ÿ Toast æ¶ˆæ¯

**é¢„æœŸç»“æœ**:
- [ ] Toast æ¶ˆæ¯æ˜¾ç¤º
- [ ] æ¶ˆæ¯å†…å®¹: "CCW Tools installed to Codex (4 tools)"
- [ ] Toast åœç•™æ—¶é—´: 3.5ç§’
- [ ] å¡ç‰‡çŠ¶æ€æ›´æ–°ï¼ˆæ˜¾ç¤º"4 tools"ç»¿è‰²å¾½ç« ï¼‰
- [ ] `~/.codex/config.toml` æ–‡ä»¶åˆ›å»ºæˆåŠŸ
- [ ] config.toml åŒ…å«æ­£ç¡®çš„ `[mcp_servers.ccw-tools]` é…ç½®

**ä¼˜å…ˆçº§**: Critical

---

### æµ‹è¯•ç”¨ä¾‹ 3: Claude MCP å¤åˆ¶åˆ° Codex

**å‰ç½®æ¡ä»¶**: 
- Dashboard è¿è¡Œ
- Claude æ¨¡å¼ä¸‹å·²åˆ›å»ºå…¨å±€ MCP æœåŠ¡å™¨ `test-server`

**æµ‹è¯•æ­¥éª¤**:
1. åˆ‡æ¢åˆ° Codex æ¨¡å¼
2. æ»šåŠ¨åˆ°"Copy Claude Servers to Codex"åŒºåŸŸ
3. æ‰¾åˆ° `test-server` å¡ç‰‡
4. ç‚¹å‡»"â†’ Codex"æŒ‰é’®
5. è§‚å¯Ÿ Toast æ¶ˆæ¯

**é¢„æœŸç»“æœ**:
- [ ] Toast æ¶ˆæ¯æ˜¾ç¤º
- [ ] æ¶ˆæ¯å†…å®¹: "Codex MCP server 'test-server' added"
- [ ] Toast åœç•™æ—¶é—´: 3.5ç§’
- [ ] å¡ç‰‡å‡ºç°"Already added"ç»¿è‰²å¾½ç« 
- [ ] "â†’ Codex"æŒ‰é’®æ¶ˆå¤±
- [ ] æœåŠ¡å™¨å‡ºç°åœ¨"Codex Global Servers"åŒºåŸŸ
- [ ] `~/.codex/config.toml` åŒ…å« `test-server` é…ç½®

**ä¼˜å…ˆçº§**: Critical

---

### æµ‹è¯•ç”¨ä¾‹ 4: å…¶ä»–é¡¹ç›® MCP å¤åˆ¶åˆ° Codex

**å‰ç½®æ¡ä»¶**: 
- Dashboard è¿è¡Œ
- å…¶ä»–é¡¹ç›®ä¸­å­˜åœ¨ MCP æœåŠ¡å™¨

**æµ‹è¯•æ­¥éª¤**:
1. åˆ‡æ¢åˆ° Codex æ¨¡å¼
2. æ»šåŠ¨åˆ°"Available from Other Projects"åŒºåŸŸ
3. æ‰¾åˆ°æ¥è‡ªå…¶ä»–é¡¹ç›®çš„æœåŠ¡å™¨å¡ç‰‡
4. ç‚¹å‡»"Install to Codex"æŒ‰é’®
5. è§‚å¯Ÿ Toast æ¶ˆæ¯

**é¢„æœŸç»“æœ**:
- [ ] Toast æ¶ˆæ¯æ˜¾ç¤º
- [ ] æ¶ˆæ¯å†…å®¹åŒ…å«æœåŠ¡å™¨åç§°
- [ ] Toast åœç•™æ—¶é—´: 3.5ç§’
- [ ] æœåŠ¡å™¨å‡ºç°åœ¨"Codex Global Servers"åŒºåŸŸ
- [ ] `~/.codex/config.toml` åŒ…å«æ–°æœåŠ¡å™¨é…ç½®

**ä¼˜å…ˆçº§**: High

---

## ğŸ” éªŒè¯æ¸…å•

### ä»£ç å®¡æŸ¥

- [x] âœ… å‰ç«¯å‡½æ•°æ­£ç¡®è°ƒç”¨åç«¯ API
- [x] âœ… åç«¯æ­£ç¡®å¤„ç†è¯·æ±‚å¹¶å†™å…¥é…ç½®æ–‡ä»¶
- [x] âœ… Toast æ¶ˆæ¯åœ¨æˆåŠŸå’Œå¤±è´¥æ—¶éƒ½æ­£ç¡®æ˜¾ç¤º
- [x] âœ… Toast æ˜¾ç¤ºæ—¶é—´æ›´æ–°ä¸º 3.5ç§’
- [x] âœ… CCW Tools å¡ç‰‡ä½¿ç”¨æ©™è‰²æ ·å¼
- [x] âœ… å¤åˆ¶æŒ‰é’®è°ƒç”¨æ­£ç¡®çš„å‡½æ•°
- [x] âœ… é…ç½®æ–‡ä»¶è·¯å¾„æ­£ç¡® (`~/.codex/config.toml`)
- [x] âœ… TOML åºåˆ—åŒ–æ­£ç¡®å¤„ç†æ‰€æœ‰å­—æ®µ

### åŠŸèƒ½æµ‹è¯•

- [ ] â¬œ CCW Tools æ ·å¼åœ¨ Claude æ¨¡å¼ä¸‹æ­£ç¡®æ˜¾ç¤º
- [ ] â¬œ Codex MCP æ–°å»ºå®‰è£…æˆåŠŸ
- [ ] â¬œ Toast æ¶ˆæ¯æ­£ç¡®æ˜¾ç¤ºå¹¶åœç•™ 3.5ç§’
- [ ] â¬œ config.toml æ–‡ä»¶æ­£ç¡®åˆ›å»º
- [ ] â¬œ ä» Claude å¤åˆ¶åˆ° Codex æˆåŠŸ
- [ ] â¬œ ä»å…¶ä»–é¡¹ç›®å¤åˆ¶åˆ° Codex æˆåŠŸ
- [ ] â¬œ å¡ç‰‡çŠ¶æ€æ­£ç¡®æ›´æ–°
- [ ] â¬œ UI åˆ·æ–°æ­£ç¡®

### è¾¹ç•Œæƒ…å†µ

- [ ] â¬œ Codex ç›®å½•ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»º
- [ ] â¬œ config.toml ä¸å­˜åœ¨æ—¶æ­£ç¡®åˆ›å»º
- [ ] â¬œ config.toml å·²å­˜åœ¨æ—¶æ­£ç¡®è¿½åŠ 
- [ ] â¬œ é‡å¤å®‰è£…åŒä¸€æœåŠ¡å™¨æ­£ç¡®æ›´æ–°é…ç½®
- [ ] â¬œ API å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯ Toast
- [ ] â¬œ ç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯

---

## ğŸ“¦ ç›¸å…³æ–‡ä»¶æ¸…å•

### å·²ä¿®æ”¹æ–‡ä»¶

1. `ccw/src/templates/dashboard-js/views/mcp-manager.js`
   - ä¿®æ”¹: CCW Tools å¡ç‰‡æ ·å¼ï¼ˆç¬¬342-415è¡Œï¼‰
   
2. `ccw/src/templates/dashboard-js/components/navigation.js`
   - ä¿®æ”¹: Toast æ˜¾ç¤ºæ—¶é—´ï¼ˆç¬¬300è¡Œï¼‰

### æ ¸å¿ƒåŠŸèƒ½æ–‡ä»¶ï¼ˆæœªä¿®æ”¹ä½†ç›¸å…³ï¼‰

3. `ccw/src/templates/dashboard-js/components/mcp-manager.js`
   - åŒ…å«: `addCodexMcpServer()`, `copyClaudeServerToCodex()` å‡½æ•°

4. `ccw/src/core/routes/mcp-routes.ts`
   - åŒ…å«: Codex MCP API ç«¯ç‚¹å’Œåç«¯é€»è¾‘

5. `ccw/src/templates/dashboard-css/06-cards.css`
   - åŒ…å«: Toast æ ·å¼å®šä¹‰

### æ–°å¢æ–‡æ¡£

6. `ccw/docs/CODEX_MCP_TESTING_GUIDE.md`
   - è¯¦ç»†æµ‹è¯•æŒ‡å—

7. `ccw/docs/QUICK_TEST_CODEX_MCP.md`
   - å¿«é€Ÿæµ‹è¯•æ­¥éª¤

8. `ccw/docs/CODEX_MCP_IMPLEMENTATION_SUMMARY.md`
   - æœ¬æ–‡æ¡£

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œ

1. **é‡å¯ Dashboard**:
   ```bash
   # åœæ­¢å½“å‰ Dashboard
   # é‡æ–°å¯åŠ¨
   npm run dev  # æˆ–ä½ çš„å¯åŠ¨å‘½ä»¤
   ```

2. **æ‰§è¡Œå¿«é€Ÿæµ‹è¯•**:
   - æŒ‰ç…§ `QUICK_TEST_CODEX_MCP.md` æ‰§è¡Œæµ‹è¯•
   - é‡ç‚¹éªŒè¯ï¼š
     - CCW Tools æ ·å¼
     - Toast æ¶ˆæ¯æ˜¾ç¤ºå’Œæ—¶é•¿
     - config.toml æ–‡ä»¶åˆ›å»º

3. **è®°å½•æµ‹è¯•ç»“æœ**:
   - å¡«å†™ `QUICK_TEST_CODEX_MCP.md` ä¸­çš„æ£€æŸ¥æ¸…å•
   - æˆªå›¾ä¿å­˜å…³é”®æ­¥éª¤

### å¦‚æœæµ‹è¯•å¤±è´¥

1. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**:
   - F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
   - Console æ ‡ç­¾æŸ¥çœ‹é”™è¯¯
   - Network æ ‡ç­¾æŸ¥çœ‹ API è¯·æ±‚

2. **æ£€æŸ¥åç«¯æ—¥å¿—**:
   - æŸ¥çœ‹ CCW Dashboard çš„æ§åˆ¶å°è¾“å‡º
   - æŸ¥æ‰¾ `Error adding Codex MCP server` ç­‰é”™è¯¯ä¿¡æ¯

3. **éªŒè¯æ–‡ä»¶æƒé™**:
   ```bash
   ls -la ~/.codex/
   # ç¡®ä¿æœ‰è¯»å†™æƒé™
   ```

---

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
# Codex MCP åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: ___________
**æµ‹è¯•äººå‘˜**: ___________
**CCW ç‰ˆæœ¬**: ___________
**æµè§ˆå™¨**: ___________

## æµ‹è¯•ç»“æœ

### CCW Tools æ ·å¼ (Claude æ¨¡å¼)
- [ ] âœ… é€šè¿‡ / [ ] âŒ å¤±è´¥
- å¤‡æ³¨: ___________

### Codex MCP æ–°å»ºå®‰è£…
- [ ] âœ… é€šè¿‡ / [ ] âŒ å¤±è´¥
- Toast æ˜¾ç¤º: [ ] âœ… æ˜¯ / [ ] âŒ å¦
- Toast æ—¶é•¿: _____ ç§’
- config.toml åˆ›å»º: [ ] âœ… æ˜¯ / [ ] âŒ å¦
- å¤‡æ³¨: ___________

### Claude â†’ Codex å¤åˆ¶
- [ ] âœ… é€šè¿‡ / [ ] âŒ å¤±è´¥
- Toast æ˜¾ç¤º: [ ] âœ… æ˜¯ / [ ] âŒ å¦
- Toast å†…å®¹æ­£ç¡®: [ ] âœ… æ˜¯ / [ ] âŒ å¦
- å¤‡æ³¨: ___________

### å…¶ä»–é¡¹ç›® â†’ Codex å®‰è£…
- [ ] âœ… é€šè¿‡ / [ ] âŒ å¤±è´¥
- å¤‡æ³¨: ___________

## å‘ç°çš„é—®é¢˜

1. ___________
2. ___________
3. ___________

## å»ºè®®æ”¹è¿›

1. ___________
2. ___________
3. ___________
```

---

## ğŸ‰ æ€»ç»“

æ‰€æœ‰åŠŸèƒ½å·²ç»å®ç°å¹¶å‡†å¤‡å¥½æµ‹è¯•ï¼š

âœ… **å·²å®Œæˆ**:
- CCW Tools MCP å¡ç‰‡æ ·å¼ä¿®å¤ï¼ˆæ©™è‰²ï¼‰
- Toast æ¶ˆæ¯æ˜¾ç¤ºæ—¶é—´å¢å¼ºï¼ˆ3.5ç§’ï¼‰
- Codex MCP å®‰è£…åŠŸèƒ½ï¼ˆå·²å­˜åœ¨ï¼Œæ— éœ€ä¿®æ”¹ï¼‰
- Claude â†’ Codex å¤åˆ¶åŠŸèƒ½ï¼ˆå·²å­˜åœ¨ï¼Œæ— éœ€ä¿®æ”¹ï¼‰
- è¯¦ç»†æµ‹è¯•æ–‡æ¡£å’ŒæŒ‡å—

âš ï¸ **å¾…éªŒè¯**:
- å®é™…è¿è¡Œç¯å¢ƒä¸­çš„åŠŸèƒ½æµ‹è¯•
- ç”¨æˆ·ä½“éªŒåé¦ˆ
- è¾¹ç•Œæƒ…å†µå¤„ç†

è¯·æŒ‰ç…§ `QUICK_TEST_CODEX_MCP.md` å¼€å§‹æµ‹è¯•ï¼
