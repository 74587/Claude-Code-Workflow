{
  "summary": {
    "timestamp": "2026-02-09 20:53:01",
    "source": "src",
    "k": 10,
    "coarse_k": 100,
    "query_count": 7,
    "avg_jaccard_topk": 0.12384302205730777,
    "avg_rbo_topk": 0.09816673566816325,
    "staged": {
      "success": 7,
      "avg_latency_ms": 8696.564499999795
    },
    "dense_rerank": {
      "success": 7,
      "avg_latency_ms": 2936.2583857136115
    }
  },
  "comparisons": [
    {
      "query": "class Config",
      "staged": {
        "strategy": "staged",
        "query": "class Config",
        "latency_ms": 6108.304299980402,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\path_mapper.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\api\\semantic.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\api\\references.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\config.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\server.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 90.47985076904297,
            "stage1_fallback_search_ms": 224.38788414001465,
            "stage2_expand_ms": 3031.7258834838867,
            "stage3_cluster_ms": 0.02956390380859375,
            "stage4_rerank_ms": 2655.31849861145
          },
          "stage_counts": {
            "stage1_candidates": 37,
            "stage1_fallback_used": 1,
            "stage2_expanded": 86,
            "stage2_unique_paths": 53,
            "stage2_duplicate_paths": 33,
            "stage3_clustered": 20,
            "stage3_strategy": "score",
            "stage4_reranked": 20
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "class Config",
        "latency_ms": 2873.6466999948025,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\vector_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\query_parser.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\embedding_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\migration_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\sqlite_store.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.125,
      "rbo_topk": 0.06741929885142856,
      "staged_unique_files_topk": 8,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 5,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "def search",
      "staged": {
        "strategy": "staged",
        "query": "def search",
        "latency_ms": 9321.754200011492,
        "num_results": 3,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\entities.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 140.43283462524414,
            "stage2_expand_ms": 6410.467863082886,
            "stage3_cluster_ms": 0.00095367431640625,
            "stage4_rerank_ms": 2675.7972240448
          },
          "stage_counts": {
            "stage1_candidates": 3,
            "stage2_expanded": 4,
            "stage2_unique_paths": 3,
            "stage2_duplicate_paths": 1,
            "stage3_clustered": 4,
            "stage3_strategy": "score",
            "stage4_reranked": 4
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "def search",
        "latency_ms": 3104.7773999869823,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\query_parser.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\vector_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.09090909090909091,
      "rbo_topk": 0.23541639942571424,
      "staged_unique_files_topk": 2,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 2,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "LspBridge",
      "staged": {
        "strategy": "staged",
        "query": "LspBridge",
        "latency_ms": 9527.073799997568,
        "num_results": 6,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\lsp_bridge.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\lsp_graph_builder.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\keepalive_bridge.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\__init__.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 98.59919548034668,
            "stage1_fallback_search_ms": 172.26457595825195,
            "stage2_expand_ms": 6125.282049179077,
            "stage3_cluster_ms": 0.017404556274414062,
            "stage4_rerank_ms": 3023.9248275756836
          },
          "stage_counts": {
            "stage1_candidates": 5,
            "stage1_fallback_used": 1,
            "stage2_expanded": 31,
            "stage2_unique_paths": 11,
            "stage2_duplicate_paths": 20,
            "stage3_clustered": 20,
            "stage3_strategy": "score",
            "stage4_reranked": 20
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "LspBridge",
        "latency_ms": 2901.0302999913692,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\vector_meta_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\graph_expander.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\sqlite_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.06666666666666667,
      "rbo_topk": 0.045191399425714276,
      "staged_unique_files_topk": 6,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 2,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "graph expansion",
      "staged": {
        "strategy": "staged",
        "query": "graph expansion",
        "latency_ms": 9120.886200010777,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\migrations\\migration_007_add_graph_neighbors.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\lsp_graph_builder.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\ann_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\config.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\graph_expander.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\enrichment.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 91.48454666137695,
            "stage1_fallback_search_ms": 172.12390899658203,
            "stage2_expand_ms": 6166.24903678894,
            "stage3_cluster_ms": 0.00095367431640625,
            "stage4_rerank_ms": 2601.947546005249
          },
          "stage_counts": {
            "stage1_candidates": 11,
            "stage1_fallback_used": 1,
            "stage2_expanded": 16,
            "stage2_unique_paths": 13,
            "stage2_duplicate_paths": 3,
            "stage3_clustered": 16,
            "stage3_strategy": "score",
            "stage4_reranked": 16
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "graph expansion",
        "latency_ms": 2847.6964999735355,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\migration_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\global_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\sqlite_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\vector_store.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.1875,
      "rbo_topk": 0.06134116970571428,
      "staged_unique_files_topk": 9,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 7,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "clustering strategy",
      "staged": {
        "strategy": "staged",
        "query": "clustering strategy",
        "latency_ms": 8424.535699993372,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\config.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\__init__.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\dbscan_strategy.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\noop_strategy.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\base.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\hdbscan_strategy.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\frequency_strategy.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\factory.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\__init__.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 92.8945541381836,
            "stage1_fallback_search_ms": 192.06547737121582,
            "stage2_expand_ms": 5568.126440048218,
            "stage3_cluster_ms": 0.0011920928955078125,
            "stage4_rerank_ms": 2480.673313140869
          },
          "stage_counts": {
            "stage1_candidates": 10,
            "stage1_fallback_used": 1,
            "stage2_expanded": 10,
            "stage2_unique_paths": 10,
            "stage2_duplicate_paths": 0,
            "stage3_clustered": 10,
            "stage3_strategy": "score",
            "stage4_reranked": 10
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "clustering strategy",
        "latency_ms": 2974.9999000132084,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\vector_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\__init__.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\gpu_support.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\enrichment.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.1111111111111111,
      "rbo_topk": 0.04670528456571428,
      "staged_unique_files_topk": 10,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 3,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "error handling",
      "staged": {
        "strategy": "staged",
        "query": "error handling",
        "latency_ms": 9253.624700009823,
        "num_results": 6,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\lsp_bridge.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\gpu_support.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\rotational_embedder.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\watcher\\manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 102.18691825866699,
            "stage1_fallback_search_ms": 176.97691917419434,
            "stage2_expand_ms": 6113.626480102539,
            "stage3_cluster_ms": 0.00095367431640625,
            "stage4_rerank_ms": 2774.4452953338623
          },
          "stage_counts": {
            "stage1_candidates": 5,
            "stage1_fallback_used": 1,
            "stage2_expanded": 13,
            "stage2_unique_paths": 6,
            "stage2_duplicate_paths": 7,
            "stage3_clustered": 13,
            "stage3_strategy": "score",
            "stage4_reranked": 13
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "error handling",
        "latency_ms": 2860.619900047779,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\__init__.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\embedding_manager.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.07142857142857142,
      "rbo_topk": 0.045191399425714276,
      "staged_unique_files_topk": 5,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 4,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "how to parse json",
      "staged": {
        "strategy": "staged",
        "query": "how to parse json",
        "latency_ms": 9119.772599995136,
        "num_results": 7,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\standalone_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\parsers\\factory.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\indexing\\symbol_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\parsers\\treesitter_parser.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 90.18850326538086,
            "stage1_fallback_search_ms": 157.95397758483887,
            "stage2_expand_ms": 6293.469429016113,
            "stage3_cluster_ms": 0.0011920928955078125,
            "stage4_rerank_ms": 2486.8383407592773
          },
          "stage_counts": {
            "stage1_candidates": 4,
            "stage1_fallback_used": 1,
            "stage2_expanded": 9,
            "stage2_unique_paths": 7,
            "stage2_duplicate_paths": 2,
            "stage3_clustered": 9,
            "stage3_strategy": "score",
            "stage4_reranked": 9
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "how to parse json",
        "latency_ms": 2991.0379999876022,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\ranking.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\sqlite_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\ann_index.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.21428571428571427,
      "rbo_topk": 0.18590219827714285,
      "staged_unique_files_topk": 7,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 5,
      "dense_unique_dirs_topk": 4
    }
  ]
}