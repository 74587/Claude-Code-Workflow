{
  "summary": {
    "timestamp": "2026-02-10 12:52:44",
    "source": "src",
    "k": 10,
    "coarse_k": 100,
    "query_count": 7,
    "avg_jaccard_topk": 0.13455730777159347,
    "avg_rbo_topk": 0.10274807844326529,
    "staged": {
      "success": 7,
      "avg_latency_ms": 4445.262371412346
    },
    "dense_rerank": {
      "success": 7,
      "avg_latency_ms": 3327.1750857276575
    }
  },
  "comparisons": [
    {
      "query": "class Config",
      "staged": {
        "strategy": "staged",
        "query": "class Config",
        "latency_ms": 2719.7998999655247,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\path_mapper.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\api\\semantic.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\api\\references.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\embedding_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\server.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 33.12373161315918,
            "stage1_fallback_search_ms": 230.31878471374512,
            "stage2_expand_ms": 22.444486618041992,
            "stage3_cluster_ms": 0.06079673767089844,
            "stage4_rerank_ms": 2338.5443687438965
          },
          "stage_counts": {
            "stage1_candidates": 37,
            "stage1_fallback_used": 1,
            "stage2_expanded": 86,
            "stage2_unique_paths": 53,
            "stage2_duplicate_paths": 33,
            "stage3_clustered": 20,
            "stage3_strategy": "path",
            "stage4_reranked": 20
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "class Config",
        "latency_ms": 2334.8668000102043,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\vector_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\query_parser.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\embedding_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\migration_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\sqlite_store.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.2,
      "rbo_topk": 0.09948869827714285,
      "staged_unique_files_topk": 8,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 4,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "def search",
      "staged": {
        "strategy": "staged",
        "query": "def search",
        "latency_ms": 4470.056899994612,
        "num_results": 3,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\entities.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 28.5646915435791,
            "stage2_expand_ms": 2216.57133102417,
            "stage3_cluster_ms": 0.001430511474609375,
            "stage4_rerank_ms": 2131.246566772461
          },
          "stage_counts": {
            "stage1_candidates": 3,
            "stage2_expanded": 4,
            "stage2_unique_paths": 3,
            "stage2_duplicate_paths": 1,
            "stage3_clustered": 4,
            "stage3_strategy": "path",
            "stage4_reranked": 4
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "def search",
        "latency_ms": 2447.341199964285,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\query_parser.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\vector_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.09090909090909091,
      "rbo_topk": 0.23541639942571424,
      "staged_unique_files_topk": 2,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 2,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "LspBridge",
      "staged": {
        "strategy": "staged",
        "query": "LspBridge",
        "latency_ms": 6126.65680000186,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\__init__.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\lsp_bridge.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\lsp_graph_builder.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\keepalive_bridge.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 25.135278701782227,
            "stage1_fallback_search_ms": 171.53453826904297,
            "stage2_expand_ms": 2094.9013233184814,
            "stage3_cluster_ms": 0.024318695068359375,
            "stage4_rerank_ms": 3743.204355239868
          },
          "stage_counts": {
            "stage1_candidates": 5,
            "stage1_fallback_used": 1,
            "stage2_expanded": 31,
            "stage2_unique_paths": 11,
            "stage2_duplicate_paths": 20,
            "stage3_clustered": 11,
            "stage3_strategy": "path",
            "stage4_reranked": 11
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "LspBridge",
        "latency_ms": 9015.508300036192,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\vector_meta_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\graph_expander.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\sqlite_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.06666666666666667,
      "rbo_topk": 0.045191399425714276,
      "staged_unique_files_topk": 6,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 2,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "graph expansion",
      "staged": {
        "strategy": "staged",
        "query": "graph expansion",
        "latency_ms": 4319.597599953413,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\migrations\\migration_007_add_graph_neighbors.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\lsp_graph_builder.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\ann_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\config.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\graph_expander.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\enrichment.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 18.799781799316406,
            "stage1_fallback_search_ms": 167.36602783203125,
            "stage2_expand_ms": 2101.4957427978516,
            "stage3_cluster_ms": 0.00095367431640625,
            "stage4_rerank_ms": 1976.8805503845215
          },
          "stage_counts": {
            "stage1_candidates": 11,
            "stage1_fallback_used": 1,
            "stage2_expanded": 16,
            "stage2_unique_paths": 13,
            "stage2_duplicate_paths": 3,
            "stage3_clustered": 16,
            "stage3_strategy": "path",
            "stage4_reranked": 16
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "graph expansion",
        "latency_ms": 2356.994699984789,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\migration_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\global_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\sqlite_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\vector_store.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.1875,
      "rbo_topk": 0.06134116970571428,
      "staged_unique_files_topk": 9,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 7,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "clustering strategy",
      "staged": {
        "strategy": "staged",
        "query": "clustering strategy",
        "latency_ms": 4574.691199988127,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\config.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\__init__.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\dbscan_strategy.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\noop_strategy.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\base.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\hdbscan_strategy.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\frequency_strategy.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\factory.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\clustering\\__init__.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 45.72629928588867,
            "stage1_fallback_search_ms": 233.0036163330078,
            "stage2_expand_ms": 2068.8536167144775,
            "stage3_cluster_ms": 0.0007152557373046875,
            "stage4_rerank_ms": 2152.9064178466797
          },
          "stage_counts": {
            "stage1_candidates": 10,
            "stage1_fallback_used": 1,
            "stage2_expanded": 10,
            "stage2_unique_paths": 10,
            "stage2_duplicate_paths": 0,
            "stage3_clustered": 10,
            "stage3_strategy": "path",
            "stage4_reranked": 10
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "clustering strategy",
        "latency_ms": 2311.4787000119686,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\vector_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\__init__.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\gpu_support.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\enrichment.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.1111111111111111,
      "rbo_topk": 0.04670528456571428,
      "staged_unique_files_topk": 10,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 3,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "error handling",
      "staged": {
        "strategy": "staged",
        "query": "error handling",
        "latency_ms": 4616.5374999940395,
        "num_results": 6,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\lsp_bridge.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\gpu_support.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\rotational_embedder.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\watcher\\manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 38.83004188537598,
            "stage1_fallback_search_ms": 263.0441188812256,
            "stage2_expand_ms": 2070.7976818084717,
            "stage3_cluster_ms": 0.00095367431640625,
            "stage4_rerank_ms": 2133.629083633423
          },
          "stage_counts": {
            "stage1_candidates": 5,
            "stage1_fallback_used": 1,
            "stage2_expanded": 13,
            "stage2_unique_paths": 6,
            "stage2_duplicate_paths": 7,
            "stage3_clustered": 13,
            "stage3_strategy": "path",
            "stage4_reranked": 13
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "error handling",
        "latency_ms": 2337.4413000643253,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\__init__.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\registry.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\embedding_manager.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.07142857142857142,
      "rbo_topk": 0.045191399425714276,
      "staged_unique_files_topk": 5,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 4,
      "dense_unique_dirs_topk": 4
    },
    {
      "query": "how to parse json",
      "staged": {
        "strategy": "staged",
        "query": "how to parse json",
        "latency_ms": 4289.496699988842,
        "num_results": 7,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\lsp\\standalone_manager.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\parsers\\factory.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\indexing\\symbol_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\parsers\\treesitter_parser.py"
        ],
        "stage_stats": {
          "stage_times": {
            "stage1_binary_ms": 34.40546989440918,
            "stage1_fallback_search_ms": 231.8587303161621,
            "stage2_expand_ms": 2068.8445568084717,
            "stage3_cluster_ms": 0.0007152557373046875,
            "stage4_rerank_ms": 1850.6083488464355
          },
          "stage_counts": {
            "stage1_candidates": 4,
            "stage1_fallback_used": 1,
            "stage2_expanded": 9,
            "stage2_unique_paths": 7,
            "stage2_duplicate_paths": 2,
            "stage3_clustered": 9,
            "stage3_strategy": "path",
            "stage4_reranked": 9
          }
        },
        "error": null
      },
      "dense_rerank": {
        "strategy": "dense_rerank",
        "query": "how to parse json",
        "latency_ms": 2486.594600021839,
        "num_results": 10,
        "topk_paths": [
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\cli\\commands.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\chain_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\index_tree.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\code_extractor.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\dir_index.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\hybrid_search.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\search\\ranking.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\chunker.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\storage\\sqlite_store.py",
          "d:\\claude_dms3\\codex-lens\\src\\codexlens\\semantic\\ann_index.py"
        ],
        "stage_stats": null,
        "error": null
      },
      "jaccard_topk": 0.21428571428571427,
      "rbo_topk": 0.18590219827714285,
      "staged_unique_files_topk": 7,
      "dense_unique_files_topk": 10,
      "staged_unique_dirs_topk": 5,
      "dense_unique_dirs_topk": 4
    }
  ]
}